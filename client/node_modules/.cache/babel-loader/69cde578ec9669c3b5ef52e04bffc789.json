{"ast":null,"code":"var _jsxFileName = \"/home/thuong/hedspi-social/client/src/components/EditPost/EditPost.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { AuthContext } from \"../../context/AuthContext\";\nimport './addpost.css';\nimport { Select, Space, Button, message } from 'antd';\nimport { db } from \"../../firebase\";\nimport { addDoc, doc, serverTimestamp, collection } from 'firebase/firestore';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport PostService from '../../service/PostService';\nimport { categories } from '../AddPost/categories';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Option\n} = Select;\nexport default function EditPost() {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [content, setContent] = useState('');\n  const navigate = useNavigate();\n  const [tags, setTags] = useState([]);\n  const {\n    currentUser\n  } = useContext(AuthContext);\n\n  const handleGetPost = async id => {\n    const post = await PostService.getPostById(id);\n\n    if (post) {\n      setContent(post.content);\n      setTags(post.tags);\n    }\n\n    console.log(\"get post by id \", post);\n  };\n\n  useEffect(() => {\n    handleGetPost(id);\n  }, [id]);\n  const tagOptions = ['Culture', 'Language', 'Travel', 'History', 'Cuisine', 'Art', 'Anime', 'Education', 'Business', 'Cross-cultural', 'Japanese lifestyle']; // var toolbarOptions = [['bold', 'italic'], ['link', 'image']];\n\n  var toolbarOptions = [['bold', 'italic', 'underline', 'strike'], // toggled buttons\n  ['blockquote', 'code-block'], ['link', 'image'], [{\n    header: 1\n  }], // custom button values\n  [{\n    list: 'ordered'\n  }, {\n    list: 'bullet'\n  }], [{\n    script: 'sub'\n  }, {\n    script: 'super'\n  }], // superscript/subscript\n  [{\n    indent: '-1'\n  }, {\n    indent: '+1'\n  }], // outdent/indent\n  [{\n    direction: 'rtl'\n  }], // text direction\n  [{\n    size: ['small', false, 'large', 'huge']\n  }], // custom dropdown\n  [{\n    header: [1, 2, 3, 4, 5, 6, false]\n  }], [{\n    color: []\n  }, {\n    background: []\n  }], // dropdown with defaults from theme\n  [{\n    font: []\n  }], [{\n    align: []\n  }], ['clean'] // remove formatting button\n  ];\n  const module = {\n    toolbar: toolbarOptions\n  };\n\n  const handleChangeValue = value => {\n    console.log(value);\n    setContent(value);\n  };\n\n  const handleChangeTag = selectedValues => {\n    setTags(selectedValues);\n    console.log('Selected values:', selectedValues);\n  };\n\n  const handlCancel = async () => {\n    // setTags([])\n    // setContent([])\n    navigate('/home');\n  };\n\n  const handlePost = async () => {\n    console.log(\"tags\", tags);\n\n    if (tags.length <= 0) {\n      message.open({\n        type: 'error',\n        content: 'ハッシュタグを少なくとも1つ選択してください。'\n      });\n      return;\n    }\n\n    if (content.length <= 0) {\n      message.open({\n        type: 'error',\n        content: \"あなたのコンテンツを入力してください。\"\n      });\n      return;\n    }\n\n    const post = {\n      tags: tags,\n      content: content,\n      uid: currentUser.uid,\n      _id: id\n    };\n    console.log(\"content\", post);\n    const result = await PostService.updatePost(post);\n\n    if (result) {\n      message.open({\n        type: 'success',\n        content: '投稿の更新に成功しました。'\n      });\n    }\n\n    console.log(result);\n    navigate('/home');\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(Space, {\n      direction: \"vertical\",\n      className: \"create-post mt-16mt-\",\n      size: 24,\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u6295\\u7A3F\\u3092\\u4F5C\\u6210\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        mode: \"multiple\",\n        placeholder: \"Select tags\",\n        onChange: handleChangeTag,\n        value: tags,\n        style: {\n          width: '100%'\n        },\n        options: categories\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n        className: \"quill-edit\",\n        modules: module,\n        theme: \"snow\",\n        value: content,\n        onChange: handleChangeValue,\n        style: {\n          background: '#fff'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Space, {\n        className: \"float-btn\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          children: \"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"primary\",\n          onClick: handlePost,\n          children: \"\\u30B7\\u30A7\\u30A2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 4\n  }, this);\n}\n\n_s(EditPost, \"R8z4f6bwrYNxJ+CorbBKZRTMOVY=\", false, function () {\n  return [useParams, useNavigate];\n});\n\n_c = EditPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditPost\");","map":{"version":3,"sources":["/home/thuong/hedspi-social/client/src/components/EditPost/EditPost.jsx"],"names":["React","useState","useContext","useEffect","ReactQuill","AuthContext","Select","Space","Button","message","db","addDoc","doc","serverTimestamp","collection","useNavigate","useParams","PostService","categories","Option","EditPost","id","content","setContent","navigate","tags","setTags","currentUser","handleGetPost","post","getPostById","console","log","tagOptions","toolbarOptions","header","list","script","indent","direction","size","color","background","font","align","module","toolbar","handleChangeValue","value","handleChangeTag","selectedValues","handlCancel","handlePost","length","open","type","uid","_id","result","updatePost","width"],"mappings":"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","sourcesContent":["import React, { useState,useContext, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { AuthContext } from \"../../context/AuthContext\";\nimport './addpost.css';\nimport { Select, Space, Button,message } from 'antd';\nimport { db } from \"../../firebase\";\nimport { addDoc, doc, serverTimestamp,collection, } from 'firebase/firestore';\nimport { useNavigate, useParams  } from \"react-router-dom\";\nimport PostService from '../../service/PostService';\nimport { categories } from '../AddPost/categories';\nconst { Option } = Select;\n\nexport default function EditPost() {\n  const { id } = useParams()\n\n  const [content, setContent] = useState('');\n  const navigate = useNavigate();\n  const [tags, setTags] = useState([]);\n  const { currentUser } = useContext(AuthContext);\n\n  const handleGetPost =async (id)=>{\n    const post = await PostService.getPostById(id)\n    if(post){\n      setContent(post.content)\n      setTags(post.tags)\n    }\n    console.log(\"get post by id \",post)\n  }\n  useEffect(()=>{\n    handleGetPost(id)\n  },[id])\n  const tagOptions = [\n    'Culture',\n    'Language',\n    'Travel',\n    'History',\n    'Cuisine',\n    'Art',\n    'Anime',\n    'Education',\n    'Business',\n    'Cross-cultural',\n    'Japanese lifestyle',\n  ];\n  // var toolbarOptions = [['bold', 'italic'], ['link', 'image']];\n  var toolbarOptions = [\n    ['bold', 'italic', 'underline', 'strike'], // toggled buttons\n    ['blockquote', 'code-block'],\n    ['link', 'image'],\n\n    [{ header: 1 }], // custom button values\n    [{ list: 'ordered' }, { list: 'bullet' }],\n    [{ script: 'sub' }, { script: 'super' }], // superscript/subscript\n    [{ indent: '-1' }, { indent: '+1' }], // outdent/indent\n    [{ direction: 'rtl' }], // text direction\n\n    [{ size: ['small', false, 'large', 'huge'] }], // custom dropdown\n    [{ header: [1, 2, 3, 4, 5, 6, false] }],\n\n    [{ color: [] }, { background: [] }], // dropdown with defaults from theme\n    [{ font: [] }],\n    [{ align: [] }],\n\n    ['clean'], // remove formatting button\n  ];\n  const module = {\n    toolbar: toolbarOptions,\n  };\n  const handleChangeValue = value => {\n    console.log(value);\n    setContent(value);\n  };\n\n  const handleChangeTag = selectedValues => {\n    setTags(selectedValues);\n    console.log('Selected values:', selectedValues);\n  };\n  const handlCancel=async()=>{\n    // setTags([])\n    // setContent([])\n    navigate('/home');\n  }\n  const handlePost=async()=>{\n    console.log(\"tags\",tags)\n    if(tags.length<=0){\n      message.open(\n        {\n          type: 'error',\n          content: 'ハッシュタグを少なくとも1つ選択してください。',\n        }\n      )\n        return;\n    }\n\n    if(content.length<=0){\n      message.open(\n        {\n          type: 'error',\n          content: \"あなたのコンテンツを入力してください。\",\n        }\n      )\n      return;\n    }\n\n  \n    const post={\n      tags:tags,\n      content:content,\n      uid:currentUser.uid,\n      _id:id\n    }\n    console.log(\"content\",post)\n    const result= await PostService.updatePost(post);\n    if(result){\n      message.open(\n        {\n          type: 'success',\n          content:'投稿の更新に成功しました。'\n        }\n      )\n    }\n    console.log( result)\n    navigate('/home');\n    \n    \n  }\n\n  return (\n   <div className=\"container\">\n     <Space direction=\"vertical\" className=\"create-post mt-16mt-\" size={24}>\n      <h2>投稿を作成</h2>\n      <Select\n        mode=\"multiple\"\n        placeholder=\"Select tags\"\n        onChange={handleChangeTag}\n        value={tags}\n        style={{ width: '100%' }}\n        options={categories}\n      >\n     \n      </Select>\n      <ReactQuill\n        className=\"quill-edit\"\n        modules={module}\n        theme=\"snow\"\n        value={content}\n        onChange={handleChangeValue}\n        style={{ background: '#fff' }}\n      />\n\n      <Space className=\"float-btn\">\n        <Button >キャンセル</Button>\n        <Button type=\"primary\" onClick={handlePost}>シェア</Button>\n      </Space>\n    </Space>\n   </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}