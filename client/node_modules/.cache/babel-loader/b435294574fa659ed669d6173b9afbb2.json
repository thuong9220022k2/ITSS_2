{"ast":null,"code":"var _jsxFileName = \"/home/thuong/hedspi-social/client/src/pages/Profile/Profile.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../../context/AuthContext';\nimport { Card, Avatar, Space, Button, Modal, Form, Input } from 'antd';\nimport { EditOutlined, CameraOutlined } from '@ant-design/icons';\nimport { getDownloadURL, ref, uploadBytesResumable } from 'firebase/storage';\nimport Post from '../../components/Post/Post';\nimport ReactQuill from 'react-quill';\nimport './profile.scss';\nimport PostService from '../../service/PostService';\nimport { storage } from '../../firebase';\nimport { UserContext } from '../../context/UserContext';\nimport { updateProfile } from 'firebase/auth';\nimport { doc, collection, onSnapshot, addDoc, serverTimestamp, setDoc, query, Timestamp } from 'firebase/firestore';\nimport { db } from '../../firebase';\nimport { message } from 'antd';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  var _listUser$currentUser;\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [profile, setProfile] = useState({});\n  const {\n    listUser\n  } = useContext(UserContext);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [totalLike, setTotalLike] = useState(0);\n  const [form] = Form.useForm();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState(currentUser === null || currentUser === void 0 ? void 0 : currentUser.photoURL);\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    console.log(\"profile id\", id);\n    const profile = listUser[id];\n    console.log(\"profile user\", profile);\n    setProfile(profile);\n  }, [id, listUser]);\n\n  const handleGetPost = async () => {\n    let posts = await PostService.getPostByUser(profile.uid);\n    console.log('[Profile]', posts);\n    setPosts(posts);\n  };\n\n  const handleDeletePost = useCallback(async postId => {\n    const result = await PostService.deletePost(postId);\n\n    if (result) {\n      setPosts(oldPost => oldPost.filter(post => post._id !== postId));\n    }\n  }, [posts]);\n  useEffect(() => {\n    const totalLike = posts.reduce((total, post) => {\n      return total + post.likes.length;\n    }, 0);\n    setTotalLike(totalLike);\n  }, [posts]);\n  useEffect(() => {\n    handleGetPost();\n  }, [profile]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-container\",\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      hoverable: true,\n      className: \"profile mt-16 mr-16\",\n      children: /*#__PURE__*/_jsxDEV(Space, {\n        direction: \"vertical\",\n        children: [/*#__PURE__*/_jsxDEV(Space, {\n          direction: \"vertical\",\n          children: [/*#__PURE__*/_jsxDEV(Avatar, {\n            src: profile === null || profile === void 0 ? void 0 : profile.photoURL,\n            size: 100\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Space, {\n            direction: \"vertical\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"profile-name\",\n              children: [profile === null || profile === void 0 ? void 0 : profile.displayName, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: profile === null || profile === void 0 ? void 0 : profile.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"mr-16\",\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\" \", posts.length]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this), \" \\u6295\\u7A3F\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: totalLike\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this), \" \\u3044\\u3044\\u306D\\uFF01\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"\\u7269\\u8A9E:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            dangerouslySetInnerHTML: {\n              __html: (_listUser$currentUser = listUser[currentUser.uid]) === null || _listUser$currentUser === void 0 ? void 0 : _listUser$currentUser.story\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        minWidth: 600\n      },\n      children: [' ', posts === null || posts === void 0 ? void 0 : posts.map(post => /*#__PURE__*/_jsxDEV(Post, {\n        post: post,\n        handleDeletePost: handleDeletePost\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)), posts.length <= 0 && \"投稿はありません。\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Profile, \"Q/sKIfkgeM0LJiFbLmCQYSd5jOg=\", false, function () {\n  return [Form.useForm, useParams];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["/home/thuong/hedspi-social/client/src/pages/Profile/Profile.jsx"],"names":["React","useCallback","useContext","useEffect","useState","AuthContext","Card","Avatar","Space","Button","Modal","Form","Input","EditOutlined","CameraOutlined","getDownloadURL","ref","uploadBytesResumable","Post","ReactQuill","PostService","storage","UserContext","updateProfile","doc","collection","onSnapshot","addDoc","serverTimestamp","setDoc","query","Timestamp","db","message","useNavigate","useParams","Profile","currentUser","profile","setProfile","listUser","selectedFile","setSelectedFile","posts","setPosts","totalLike","setTotalLike","form","useForm","isModalOpen","setIsModalOpen","previewUrl","setPreviewUrl","photoURL","id","console","log","handleGetPost","getPostByUser","uid","handleDeletePost","postId","result","deletePost","oldPost","filter","post","_id","reduce","total","likes","length","displayName","email","__html","story","minWidth","map"],"mappings":"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","sourcesContent":["import React, { useCallback, useContext, useEffect, useState } from 'react';\nimport { AuthContext } from '../../context/AuthContext';\nimport { Card, Avatar, Space, Button, Modal, Form, Input } from 'antd';\nimport { EditOutlined, CameraOutlined } from '@ant-design/icons';\nimport { getDownloadURL, ref, uploadBytesResumable } from 'firebase/storage';\nimport Post from '../../components/Post/Post';\nimport ReactQuill from 'react-quill';\nimport './profile.scss';\nimport PostService from '../../service/PostService';\nimport { storage } from '../../firebase';\nimport { UserContext } from '../../context/UserContext';\nimport { updateProfile } from 'firebase/auth';\nimport {\n  doc,\n  collection,\n  onSnapshot,\n  addDoc,\n  serverTimestamp,\n  setDoc,\n  query,\n  Timestamp,\n} from 'firebase/firestore';\nimport { db } from '../../firebase';\nimport { message } from 'antd';\nimport { useNavigate, useParams  } from \"react-router-dom\";\n\nexport default function Profile() {\n  const { currentUser } = useContext(AuthContext);\n  const [profile,setProfile]=useState({});\n  const { listUser } = useContext(UserContext);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [posts, setPosts] = useState([]);\n  const [totalLike, setTotalLike] = useState(0);\n  const [form] = Form.useForm();\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [previewUrl, setPreviewUrl] = useState(currentUser?.photoURL);\n\n  const { id } = useParams()\n  useEffect(()=>{\n    console.log(\"profile id\",id)\n    const profile=listUser[id]\n    console.log(\"profile user\",profile)\n    setProfile(profile);\n\n  },[id,listUser])\n  const handleGetPost = async () => {\n\n    let posts = await PostService.getPostByUser(profile.uid);\n    console.log('[Profile]', posts);\n    setPosts(posts);\n  };\n  const handleDeletePost = useCallback(\n    async postId => {\n      const result = await PostService.deletePost(postId);\n      if (result) {\n        setPosts(oldPost => oldPost.filter(post => post._id !== postId));\n      }\n    },\n    [posts]\n  );\n \n  useEffect(() => {\n    const totalLike = posts.reduce((total, post) => {\n      return total + post.likes.length;\n    }, 0);\n    setTotalLike(totalLike);\n  }, [posts]);\n  useEffect(() => {\n    handleGetPost();\n  }, [profile]);\n  return (\n    <div className=\"profile-container\">\n      <Card hoverable={true} className=\"profile mt-16 mr-16\">\n        <Space direction=\"vertical\">\n          <Space direction=\"vertical\">\n            <Avatar src={profile?.photoURL} size={100}></Avatar>\n            <Space direction=\"vertical\">\n              <h3 className=\"profile-name\">{profile?.displayName} </h3>\n\n              <p>{profile?.email}</p>\n            </Space>\n          </Space>\n         \n          <div className=\"post-info\">\n            <span className=\"mr-16\">\n              <b> {posts.length}</b> 投稿\n            </span>\n            <span>\n              <b>{totalLike}</b> いいね！\n            </span>\n          </div>\n          <div>\n            <b>物語:</b>\n            <p\n              dangerouslySetInnerHTML={{\n                __html: listUser[currentUser.uid]?.story,\n              }}\n            ></p>\n          </div>\n        </Space>\n      </Card>\n      <div style={{minWidth:600}}>\n        {' '}\n        {posts?.map(post => (\n          <Post post={post} handleDeletePost={handleDeletePost}></Post>\n        ))}\n\n        {\n          posts.length <=0 && \"投稿はありません。\"\n        }\n      </div>\n\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}